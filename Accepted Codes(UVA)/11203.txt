#include<stdio.h>
#include<string.h>
char ch[100],ch1[10];
long ara[1000];
int main()
{
	long test,y,len,a,b,c,d,e,i,j,bef,mid,aft,n,k;
	scanf("%ld",&test);
	gets(ch1);
		for(i=0;i<test;i++)
		{
			bef=0,mid=0,aft=0,y=0,n=0;
			ara[77]=0,ara[63]=0,ara[69]=0;
			gets(ch);
			len=strlen(ch);
			for(j=0;j<len;j++)
			{
				while(ch[j]!='M'&&y==0)
				{
				   ara[ch[j]]++;
				if((ch[j]!='M'&&ch[j]!='?'&&ch[j]!='E')||ara[77]>1||ara[69]>1)
				{
					printf("no-theorem\n");
					ara[77]=0,ara[63]=0,ara[69]=0;
					y=1;
					break;
				}
				 else
				 {
					bef++;
					j++;
				 }
				}
				ara[ch[j]]++;
				j++;
				while(ch[j]!='E'&&y==0)
				{
			    ara[ch[j]]++;
				if((ch[j]!='M'&&ch[j]!='?'&&ch[j]!='E')||ara[77]>1||ara[69]>1)
				{
					printf("no-theorem\n");
					ara[77]=0,ara[63]=0,ara[69]=0;
					y=1;
					break;
				}
				  else
				  {
					mid++;
					j++;
				  }
				}
				ara[ch[j]]++;
				j++;
				while(ch[j]!='\0'&&y==0)
				{
				 ara[ch[j]]++;
				if((ch[j]!='M'&&ch[j]!='?'&&ch[j]!='E')||ara[77]>1||ara[69]>1)
				{
					printf("no-theorem\n");
					ara[77]=0,ara[63]=0,ara[69]=0;
					y=1;
					break;
				}
					else
					{
				     aft++;
				     j++;
					}
				}
			}
				if(bef>0&&aft>1&&mid>0&&(mid==aft-bef)&&y==0)
				{
					printf("theorem\n");
					y=1;
				}
			    if(y==0)
				printf("no-theorem\n");
		}
	return 0;
}
